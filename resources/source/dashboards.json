{"xhv-gsd-fw2": {"id": "xhv-gsd-fw2", "title": "Org Hierarchy (cloned for sync-cli test)", "description": "", "author_handle": "michael.richey@datadoghq.com", "author_name": "Michael Richey", "layout_type": "ordered", "url": "/dashboard/xhv-gsd-fw2/org-hierarchy-cloned-for-sync-cli-test", "is_read_only": false, "template_variables": [{"name": "datacenter", "prefix": "datacenter", "available_values": ["us3.prod.dog", "us1.prod.dog", "us5.prod.dog", "eu1.prod.dog", "us1.michelada.prod.dog", "ap1.prod.dog"], "default": "*"}], "widgets": [{"id": 4223076345279992, "definition": {"title": "HAMR", "background_color": "green", "show_title": true, "type": "group", "layout_type": "ordered", "widgets": [{"id": 4022018756058808, "definition": {"title": "GetHamrOrgConnection Traffic", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "sum:dd.sub.org_hierarchy_server.GetHamrOrgConnection{$datacenter}.as_count()"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "order_by": "values", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 0, "y": 0, "width": 4, "height": 2}}, {"id": 2960572604377442, "definition": {"title": "GetHamrOrgConnection Latency", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "p99:trace.grpc.server{resource_name:/org_hierarchy.globalorgmeta/gethamrorgconnection ,$datacenter,!datacenter:us1.ddbuild.io} by {datacenter}"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "order_by": "values", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 4, "y": 0, "width": 4, "height": 2}}, {"id": 5296285622794474, "definition": {"title": "GetHamrOrgConnection Error Rate", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "sum:dd.sub.org_hierarchy_server.GetHamrOrgConnection{$datacenter,!datacenter:us1.ddbuild.io, message:*} by {datacenter,message}.as_rate()"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "order_by": "values", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 8, "y": 0, "width": 4, "height": 2}}, {"id": 4668810196871874, "definition": {"title": "PutHamrOrgConnection Traffic", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "sum:dd.sub.org_hierarchy_server.PutHamrOrgConnection{$datacenter}.as_count()"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "order_by": "values", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 0, "y": 2, "width": 4, "height": 2}}, {"id": 3071037579002894, "definition": {"title": "PutHamrOrgConnection Latency", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "max:trace.grpc.duration{resource_name:/org_hierarchy.globalorgmeta/puthamrorgconnection}"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 4, "y": 2, "width": 4, "height": 2}}, {"id": 2625864209788172, "definition": {"title": "PutHamrOrgConnection Failures", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "sum:dd.sub.org_hierarchy_server.PutHamrOrgConnectionFailed{*} by {reason}.as_count()"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 8, "y": 2, "width": 4, "height": 2}}, {"id": 662082349403248, "definition": {"title": "DeleteHamrOrgConnection Traffic", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "sum:dd.sub.org_hierarchy_server.DeleteHamrOrgConnection{$datacenter}.as_count()"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "order_by": "values", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 0, "y": 4, "width": 4, "height": 2}}, {"id": 1129139429582656, "definition": {"title": "DeleteHamrOrgConnection Latency", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "p99:trace.grpc.server{resource_name:/org_hierarchy.globalorgmeta/deletehamrorgconnection,$datacenter,!datacenter:us1.ddbuild.io} by {datacenter}"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "order_by": "values", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 4, "y": 4, "width": 4, "height": 2}}, {"id": 2049951418902468, "definition": {"title": "DeleteHamrOrgConnection Error Rate", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "sum:dd.sub.org_hierarchy_server.DeleteHamrOrgConnectionFailed{$datacenter,!datacenter:us1.ddbuild.io,message:*} by {datacenter}.as_rate()"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "order_by": "values", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 8, "y": 4, "width": 4, "height": 2}}, {"id": 1449093750599826, "definition": {"title": "ListHamrOrgConnections Traffic", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "sum:dd.sub.org_hierarchy_server.ListHamrOrgConnections{$datacenter}.as_count()"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "order_by": "values", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 0, "y": 6, "width": 4, "height": 2}}, {"id": 2634202113576276, "definition": {"title": "ListHamrOrgConnections Latency", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"data_source": "metrics", "name": "query1", "query": "p99:trace.grpc.server{resource_name:/org_hierarchy.globalorgmeta/listhamrorgconnections* ,$datacenter,!datacenter:us1.ddbuild.io} by {datacenter}"}], "response_format": "timeseries", "style": {"palette": "dog_classic", "order_by": "values", "line_type": "solid", "line_width": "normal"}, "display_type": "line"}]}, "layout": {"x": 4, "y": 6, "width": 4, "height": 2}}]}, "layout": {"x": 0, "y": 0, "width": 12, "height": 9}}, {"id": 1736703794452876, "definition": {"title": "Cache Build", "background_color": "vivid_green", "show_title": true, "type": "group", "layout_type": "ordered", "widgets": [{"id": 5228384202088780, "definition": {"title": "Number of orgs in cache", "title_size": "16", "title_align": "left", "type": "toplist", "requests": [{"conditional_formats": [{"comparator": ">", "palette": "white_on_green", "value": 700000}, {"comparator": "<", "palette": "white_on_yellow", "value": 700000}, {"comparator": "<", "palette": "white_on_red", "value": 10}], "response_format": "scalar", "queries": [{"query": "max:dd.sub.org_hierarchy_server.CountAllOrgs{$datacenter,!datacenter:us1.ddbuild.io} by {datacenter,pod_name}.as_count()", "data_source": "metrics", "name": "query1", "aggregator": "max"}], "formulas": [{"formula": "query1"}], "sort": {"count": 500, "order_by": [{"type": "formula", "index": 0, "order": "desc"}]}}]}, "layout": {"x": 0, "y": 0, "width": 4, "height": 3}}, {"id": 811156192615822, "definition": {"title": "Number of *root* orgs in cache", "title_size": "16", "title_align": "left", "type": "toplist", "requests": [{"conditional_formats": [{"comparator": ">", "palette": "white_on_green", "value": 600000}, {"comparator": "<", "palette": "white_on_yellow", "value": 600000}, {"comparator": "<", "palette": "white_on_red", "value": 10}], "response_format": "scalar", "queries": [{"query": "max:dd.sub.org_hierarchy_server.CountHierarchies{$datacenter,!datacenter:us1.ddbuild.io} by {datacenter,pod_name}.as_count()", "data_source": "metrics", "name": "query1", "aggregator": "max"}], "formulas": [{"formula": "query1"}], "sort": {"count": 500, "order_by": [{"type": "formula", "index": 0, "order": "desc"}]}}]}, "layout": {"x": 4, "y": 0, "width": 4, "height": 3}}, {"id": 6054152220902198, "definition": {"title": "Cache Refresh Started", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"query": "avg:dd.sub.org_hierarchy_server.CacheRefreshStarted{$datacenter,!datacenter:us1.ddbuild.io} by {cluster_name,image_id}.as_count()", "data_source": "metrics", "name": "query1"}], "response_format": "timeseries", "style": {"palette": "semantic", "line_type": "solid", "line_width": "normal"}, "display_type": "bars"}], "yaxis": {"include_zero": true, "scale": "linear", "label": "", "min": "auto", "max": "auto"}, "markers": []}, "layout": {"x": 0, "y": 3, "width": 4, "height": 2}}, {"id": 4559777963132344, "definition": {"title": "Cache Built Successfully", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"query": "avg:dd.sub.org_hierarchy_server.BuildHierarchiesSuccess{$datacenter,!datacenter:us1.ddbuild.io} by {cluster_name,image_id}.as_count()", "data_source": "metrics", "name": "query1"}], "response_format": "timeseries", "style": {"palette": "semantic", "line_type": "solid", "line_width": "normal"}, "display_type": "bars"}], "yaxis": {"include_zero": true, "scale": "linear", "label": "", "min": "auto", "max": "auto"}, "markers": []}, "layout": {"x": 4, "y": 3, "width": 4, "height": 2}}, {"id": 1833019424656194, "definition": {"title": "Cache Refresh Failures", "title_size": "16", "title_align": "left", "show_legend": true, "legend_layout": "auto", "legend_columns": ["avg", "min", "max", "value", "sum"], "type": "timeseries", "requests": [{"formulas": [{"formula": "query1"}], "queries": [{"query": "sum:dd.sub.org_hierarchy_server.CacheRefreshFailure{$datacenter,!datacenter:us1.ddbuild.io} by {cluster_name,image_id,reason}.as_count()", "data_source": "metrics", "name": "query1"}], "response_format": "timeseries", "style": {"palette": "semantic", "line_type": "solid", "line_width": "normal"}, "display_type": "bars"}], "yaxis": {"include_zero": true, "scale": "linear", "label": "", "min": "auto", "max": "auto"}, "markers": []}, "layout": {"x": 4, "y": 5, "width": 4, "height": 2}}]}, "layout": {"x": 0, "y": 0, "width": 8, "height": 8, "is_column_break": true}}, {"id": 3835487459871956, "definition": {"type": "note", "content": "# Org Hierarchy Useful Links\n\n- [Org Hierarchy Deployments](https://sdp.ddbuild.io/#/deployments?serviceName=%2Borg-hierarchy)\n- [Org Hierarchy Monitors](https://app.datadoghq.com/monitors/manage?q=%5Borg-hierarchy%5D)\n- [Org Hierarchy Logs](https://app.datadoghq.com/logs?query=service%3Aorg-hierarchy%20-source%3Aprofiling-insights&cols=service%2Cdatacenter&index=&integration_id=&integration_short_name=&messageDisplay=inline&saved_view=712268&stream_sort=desc&viz=stream&from_ts=1643210821897&to_ts=1643214421897&live=true)\n- [Org Hierarchy Pods](https://app.datadoghq.com/orchestration/overview/pod?query=tag%23app.kubernetes.io%2Fname%3Aorg-hierarchy-server&sort=metadata.name%3Aasc&start=1637076577491&end=1637077477491&paused=false)\n- [Org Hierarchy Pod Dashboard](https://app.datadoghq.com/dashboard/6ag-f7r-x93?from_ts=1638914247048&to_ts=1638917847048&live=true)\n-  [Org Hierarchy Containers](https://app.datadoghq.com/containers?query=app.kubernetes.io%2Fname%3Aorg-hierarchy-server&selectedTopGraph=timeseries)\n-  Org Hierarchy APM\n   - [Org Hierarchy APM (prod)](https://app.datadoghq.com/apm/service/org-hierarchy/org_hierarchy_server?env=prod&hostGroup=%2A&topGraphs=latency%3Alatency%2CbreakdownAs%3Apercentage%2Cerrors%3Aversion_count%2Chits%3Arate&start=1643227505699&end=1643231105699&paused=false)\n   - [Org Hierarchy APM (michelada)](https://app.datadoghq.com/apm/service/org-hierarchy/org_hierarchy_server?env=michelada&hostGroup=%2A&topGraphs=latency%3Alatency%2CbreakdownAs%3Apercentage%2Cerrors%3Aversion_count%2Chits%3Arate&start=1643227505699&end=1643231105699&paused=false)\n- [Org Hierarchy Profiles](https://app.datadoghq.com/profiling/search?query=service%3Aorg-hierarchy&agg_m=%40prof_go_cpu_cores_by_top_methods.value&agg_q=%40prof_go_cpu_cores_by_top_methods.attributes.method&agg_t=avg&start=1639485436272&end=1639499836272&paused=false)\n- [Org Hierarchy Traces](https://app.datadoghq.com/apm/traces?query=%40_top_level%3A1%20service%3Aorg-hierarchy%20-resource_name%3A%22egress%20global-storage-api-bigtable.gds.sidecar-proxy.fabric.dog%22&cols=core_service%2Ccore_resource_name%2Clog_duration%2Clog_http.method%2Clog_http.status_code&historicalData=true&messageDisplay=inline&sort=desc&streamTraces=true&start=1643229945053&end=1643230845053&paused=false)", "background_color": "white", "font_size": "14", "text_align": "left", "vertical_align": "top", "show_tick": false, "tick_pos": "50%", "tick_edge": "left", "has_padding": true}, "layout": {"x": 8, "y": 0, "width": 4, "height": 8}}], "notify_list": [], "created_at": "2024-09-04T20:31:16.030361+00:00", "modified_at": "2024-09-04T20:32:54.282800+00:00", "experience_type": "default", "reflow_type": "fixed", "tags": ["team:subscriptions"], "restricted_roles": []}}